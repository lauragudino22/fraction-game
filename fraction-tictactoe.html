<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fraction Tic-Tac-Toe</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }
        .min-h-screen {
            min-height: 100vh;
        }
        .bg-gradient {
            background: linear-gradient(to bottom right, #c084fc, #f9a8d4, #60a5fa);
        }
        .flex {
            display: flex;
        }
        .flex-col {
            flex-direction: column;
        }
        .flex-wrap {
            flex-wrap: wrap;
        }
        .items-center {
            align-items: center;
        }
        .justify-center {
            justify-content: center;
        }
        .justify-between {
            justify-content: space-between;
        }
        .gap-1 { gap: 0.25rem; }
        .gap-2 { gap: 0.5rem; }
        .gap-3 { gap: 0.75rem; }
        .gap-4 { gap: 1rem; }
        .gap-6 { gap: 1.5rem; }
        .gap-8 { gap: 2rem; }
        .p-1 { padding: 0.25rem; }
        .p-2 { padding: 0.5rem; }
        .p-3 { padding: 0.75rem; }
        .p-4 { padding: 1rem; }
        .p-6 { padding: 1.5rem; }
        .p-8 { padding: 2rem; }
        .p-12 { padding: 3rem; }
        .px-4 { padding-left: 1rem; padding-right: 1rem; }
        .px-6 { padding-left: 1.5rem; padding-right: 1.5rem; }
        .px-8 { padding-left: 2rem; padding-right: 2rem; }
        .py-2 { padding-top: 0.5rem; padding-bottom: 0.5rem; }
        .py-3 { padding-top: 0.75rem; padding-bottom: 0.75rem; }
        .py-4 { padding-top: 1rem; padding-bottom: 1rem; }
        .py-6 { padding-top: 1.5rem; padding-bottom: 1.5rem; }
        .mb-1 { margin-bottom: 0.25rem; }
        .mb-2 { margin-bottom: 0.5rem; }
        .mb-4 { margin-bottom: 1rem; }
        .mb-6 { margin-bottom: 1.5rem; }
        .mb-8 { margin-bottom: 2rem; }
        .mt-1 { margin-top: 0.25rem; }
        .mt-4 { margin-top: 1rem; }
        .mx-2 { margin-left: 0.5rem; margin-right: 0.5rem; }
        .mx-auto { margin-left: auto; margin-right: auto; }
        .max-w-2xl { max-width: 42rem; }
        .max-w-6xl { max-width: 72rem; }
        .w-8 { width: 2rem; }
        .w-10 { width: 2.5rem; }
        .w-12 { width: 3rem; }
        .w-14 { width: 3.5rem; }
        .w-16 { width: 4rem; }
        .w-20 { width: 5rem; }
        .w-24 { width: 6rem; }
        .w-full { width: 100%; }
        .h-16 { height: 4rem; }
        .h-20 { height: 5rem; }
        .h-24 { height: 6rem; }
        .bg-white { background-color: white; }
        .bg-green-100 { background-color: #dcfce7; }
        .bg-green-500 { background-color: #22c55e; }
        .bg-green-600 { background-color: #16a34a; }
        .bg-green-700 { background-color: #15803d; }
        .bg-yellow-500 { background-color: #eab308; }
        .bg-yellow-600 { background-color: #ca8a04; }
        .bg-red-100 { background-color: #fee2e2; }
        .bg-red-500 { background-color: #ef4444; }
        .bg-red-600 { background-color: #dc2626; }
        .bg-purple-100 { background-color: #f3e8ff; }
        .bg-purple-600 { background-color: #9333ea; }
        .bg-purple-700 { background-color: #7e22ce; }
        .bg-orange-500 { background-color: #f97316; }
        .bg-orange-600 { background-color: #ea580c; }
        .bg-blue-50 { background-color: #eff6ff; }
        .bg-purple-50 { background-color: #faf5ff; }
        .bg-gray-100 { background-color: #f3f4f6; }
        .bg-gray-400 { background-color: #9ca3af; }
        .bg-gray-800 { background-color: #1f2937; }
        .text-gray-500 { color: #6b7280; }
        .text-gray-600 { color: #4b5563; }
        .text-gray-700 { color: #374151; }
        .text-gray-800 { color: #1f2937; }
        .text-white { color: white; }
        .text-blue-500 { color: #3b82f6; }
        .text-red-500 { color: #ef4444; }
        .text-red-800 { color: #991b1b; }
        .text-green-800 { color: #166534; }
        .text-purple-600 { color: #9333ea; }
        .text-purple-800 { color: #6b21a8; }
        .text-yellow-500 { color: #eab308; }
        .text-base { font-size: 1rem; }
        .text-lg { font-size: 1.125rem; }
        .text-xl { font-size: 1.25rem; }
        .text-2xl { font-size: 1.5rem; }
        .text-3xl { font-size: 1.875rem; }
        .text-4xl { font-size: 2.25rem; }
        .text-5xl { font-size: 3rem; }
        .text-6xl { font-size: 3.75rem; }
        .text-sm { font-size: 0.875rem; }
        .font-bold { font-weight: 700; }
        .text-center { text-align: center; }
        .rounded-xl { border-radius: 0.75rem; }
        .rounded-2xl { border-radius: 1rem; }
        .rounded-3xl { border-radius: 1.5rem; }
        .rounded-full { border-radius: 9999px; }
        .rounded-lg { border-radius: 0.5rem; }
        .shadow-lg { box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1); }
        .shadow-2xl { box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25); }
        .border-t-2 { border-top: 2px solid; }
        .border-t-4 { border-top: 4px solid; }
        .border-4 { border-width: 4px; }
        .border-gray-800 { border-color: #1f2937; }
        .border-purple-400 { border-color: #c084fc; }
        .ring-4 { box-shadow: 0 0 0 4px; }
        .ring-yellow-400 { --tw-ring-color: #facc15; box-shadow: 0 0 0 4px var(--tw-ring-color); }
        button {
            cursor: pointer;
            transition: all 0.2s;
            border: none;
            outline: none;
        }
        button:hover:not(:disabled) {
            transform: scale(1.05);
        }
        button:disabled {
            cursor: not-allowed;
            opacity: 0.5;
        }
        .bg-green-500:hover:not(:disabled) { background-color: #16a34a; }
        .bg-green-600:hover:not(:disabled) { background-color: #15803d; }
        .bg-yellow-500:hover:not(:disabled) { background-color: #ca8a04; }
        .bg-red-500:hover:not(:disabled) { background-color: #dc2626; }
        .bg-purple-600:hover:not(:disabled) { background-color: #7e22ce; }
        .bg-orange-500:hover:not(:disabled) { background-color: #ea580c; }
        .bg-white:hover:not(:disabled) { background-color: #f3f4f6; }
        input[type="number"] {
            outline: none;
        }
        input[type="number"]:focus {
            box-shadow: 0 0 0 3px rgba(192, 132, 252, 0.5);
        }
        input[type="number"]::-webkit-inner-spin-button,
        input[type="number"]::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        .grid {
            display: grid;
        }
        .grid-cols-1 {
            grid-template-columns: repeat(1, minmax(0, 1fr));
        }
        .grid-cols-3 {
            grid-template-columns: repeat(3, minmax(0, 1fr));
        }
        .order-1 { order: 1; }
        .order-2 { order: 2; }
        .space-y-4 > * + * {
            margin-top: 1rem;
        }
        .inline-block {
            display: inline-block;
        }
        .bg-gradient-problem {
            background: linear-gradient(to right, #eff6ff, #faf5ff);
        }
        @media (min-width: 640px) {
            .sm\\:gap-3 { gap: 0.75rem; }
            .sm\\:gap-2 { gap: 0.5rem; }
            .sm\\:p-2 { padding: 0.5rem; }
            .sm\\:p-3 { padding: 0.75rem; }
            .sm\\:p-6 { padding: 1.5rem; }
            .sm\\:px-6 { padding-left: 1.5rem; padding-right: 1.5rem; }
            .sm\\:py-3 { padding-top: 0.75rem; padding-bottom: 0.75rem; }
            .sm\\:w-10 { width: 2.5rem; }
            .sm\\:w-12 { width: 3rem; }
            .sm\\:w-14 { width: 3.5rem; }
            .sm\\:w-16 { width: 5rem; }
            .sm\\:w-20 { width: 5rem; }
            .sm\\:h-20 { height: 5rem; }
            .sm\\:text-lg { font-size: 1.125rem; }
            .sm\\:text-xl { font-size: 1.25rem; }
            .sm\\:text-2xl { font-size: 1.5rem; }
            .sm\\:text-3xl { font-size: 1.875rem; }
            .sm\\:text-4xl { font-size: 2.25rem; }
            .sm\\:text-5xl { font-size: 3rem; }
            .sm\\:border-t-3 { border-top-width: 3px; }
            .sm\\:flex-row { flex-direction: row; }
            .sm\\:mx-4 { margin-left: 1rem; margin-right: 1rem; }
        }
        @media (min-width: 768px) {
            .md\\:gap-4 { gap: 1rem; }
            .md\\:p-8 { padding: 2rem; }
            .md\\:w-12 { width: 3rem; }
            .md\\:w-16 { width: 4rem; }
            .md\\:w-20 { width: 5rem; }
            .md\\:w-24 { width: 6rem; }
            .md\\:h-24 { height: 6rem; }
            .md\\:text-3xl { font-size: 1.875rem; }
            .md\\:text-4xl { font-size: 2.25rem; }
            .md\\:text-5xl { font-size: 3rem; }
            .md\\:text-6xl { font-size: 3.75rem; }
            .md\\:border-t-4 { border-top-width: 4px; }
        }
        @media (min-width: 1024px) {
            .lg\\:grid-cols-2 {
                grid-template-columns: repeat(2, minmax(0, 1fr));
            }
            .lg\\:gap-8 { gap: 2rem; }
            .lg\\:order-1 { order: 1; }
            .lg\\:order-2 { order: 2; }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        function FractionTicTacToe() {
          const [level, setLevel] = useState('easy');
          const [board, setBoard] = useState(Array(9).fill(null));
          const [currentPlayer, setCurrentPlayer] = useState('X');
          const [selectedCell, setSelectedCell] = useState(null);
          const [currentProblem, setCurrentProblem] = useState(null);
          const [userAnswer, setUserAnswer] = useState({ whole: '', numerator: '', denominator: '' });
          const [feedback, setFeedback] = useState('');
          const [showAnswer, setShowAnswer] = useState(false);
          const [gameStarted, setGameStarted] = useState(false);
          const [winner, setWinner] = useState(null);
          const [playerXScore, setPlayerXScore] = useState(0);
          const [playerOScore, setPlayerOScore] = useState(0);
          const [round, setRound] = useState(1);

          const gcd = (a, b) => {
            a = Math.abs(a);
            b = Math.abs(b);
            while (b !== 0) {
              let temp = b;
              b = a % b;
              a = temp;
            }
            return a;
          };

          const simplifyFraction = (num, den) => {
            if (den === 0) return { numerator: 0, denominator: 1 };
            const divisor = gcd(num, den);
            return { numerator: num / divisor, denominator: den / divisor };
          };

          const checkWinner = (board) => {
            const lines = [
              [0, 1, 2], [3, 4, 5], [6, 7, 8], // rows
              [0, 3, 6], [1, 4, 7], [2, 5, 8], // columns
              [0, 4, 8], [2, 4, 6] // diagonals
            ];
            
            for (let line of lines) {
              const [a, b, c] = line;
              if (board[a] && board[a] === board[b] && board[a] === board[c]) {
                return board[a];
              }
            }
            
            if (board.every(cell => cell !== null)) {
              return 'tie';
            }
            
            return null;
          };

          const generateProblem = (difficulty) => {
            const operations = ['+', '-'];
            const operation = operations[Math.floor(Math.random() * operations.length)];
            
            if (difficulty === 'easy') {
              const denominator = [2, 3, 4, 5, 6, 8, 10][Math.floor(Math.random() * 7)];
              let num1 = Math.floor(Math.random() * (denominator - 1)) + 1;
              let num2 = Math.floor(Math.random() * (denominator - 1)) + 1;
              
              if (operation === '-' && num1 < num2) {
                [num1, num2] = [num2, num1];
              }
              
              const answerNum = operation === '+' ? num1 + num2 : num1 - num2;
              const answer = simplifyFraction(answerNum, denominator);
              
              return {
                fraction1: { numerator: num1, denominator },
                fraction2: { numerator: num2, denominator },
                operation,
                answer
              };
            } else if (difficulty === 'medium') {
              const den1 = [2, 3, 4, 5, 6][Math.floor(Math.random() * 5)];
              let den2 = [2, 3, 4, 5, 6][Math.floor(Math.random() * 5)];
              while (den2 === den1) {
                den2 = [2, 3, 4, 5, 6][Math.floor(Math.random() * 5)];
              }
              
              const num1 = Math.floor(Math.random() * (den1 - 1)) + 1;
              const num2 = Math.floor(Math.random() * (den2 - 1)) + 1;
              
              const lcd = (den1 * den2) / gcd(den1, den2);
              const convertedNum1 = num1 * (lcd / den1);
              const convertedNum2 = num2 * (lcd / den2);
              
              let answerNum = operation === '+' ? convertedNum1 + convertedNum2 : convertedNum1 - convertedNum2;
              
              if (answerNum < 0) {
                return generateProblem(difficulty);
              }
              
              const answer = simplifyFraction(answerNum, lcd);
              
              return {
                fraction1: { numerator: num1, denominator: den1 },
                fraction2: { numerator: num2, denominator: den2 },
                operation,
                answer
              };
            } else {
              // Hard: One mixed number and one proper or improper fraction
              const whole = Math.floor(Math.random() * 3) + 1;
              const den1 = [2, 3, 4, 5, 6][Math.floor(Math.random() * 5)];
              const den2 = [2, 3, 4, 5, 6][Math.floor(Math.random() * 5)];
              
              // Mixed number fraction part (proper)
              const num1 = Math.floor(Math.random() * (den1 - 1)) + 1;
              
              // Second fraction can be proper or improper
              const num2 = Math.floor(Math.random() * (den2 * 2 - 1)) + 1;
              
              // Randomly decide which fraction is the mixed number
              const mixedFirst = Math.random() > 0.5;
              
              let fraction1, fraction2, improper1Num, improper2Num, fraction1Den, fraction2Den;
              
              if (mixedFirst) {
                fraction1 = { whole: whole, numerator: num1, denominator: den1 };
                fraction2 = { numerator: num2, denominator: den2 };
                fraction1Den = den1;
                fraction2Den = den2;
              } else {
                fraction1 = { numerator: num2, denominator: den2 };
                fraction2 = { whole: whole, numerator: num1, denominator: den1 };
                fraction1Den = den2;
                fraction2Den = den1;
              }
              
              // Convert to improper fractions for calculation using the CORRECT denominators
              improper1Num = fraction1.whole ? (fraction1.whole * fraction1.denominator + fraction1.numerator) : fraction1.numerator;
              improper2Num = fraction2.whole ? (fraction2.whole * fraction2.denominator + fraction2.numerator) : fraction2.numerator;
              
              const lcd = (fraction1Den * fraction2Den) / gcd(fraction1Den, fraction2Den);
              const convertedNum1 = improper1Num * (lcd / fraction1Den);
              const convertedNum2 = improper2Num * (lcd / fraction2Den);
              
              let answerNum = operation === '+' ? convertedNum1 + convertedNum2 : convertedNum1 - convertedNum2;
              
              if (answerNum < 0) {
                return generateProblem(difficulty);
              }
              
              const answer = simplifyFraction(answerNum, lcd);
              
              return {
                fraction1,
                fraction2,
                operation,
                answer
              };
            }
          };

          useEffect(() => {
            const result = checkWinner(board);
            if (result) {
              setWinner(result);
              if (result === 'X') {
                setPlayerXScore(playerXScore + 1);
              } else if (result === 'O') {
                setPlayerOScore(playerOScore + 1);
              }
            }
          }, [board]);

          const handleCellClick = (index) => {
            if (board[index] || winner) return;
            setSelectedCell(index);
            setCurrentProblem(generateProblem(level));
            setFeedback('');
            setUserAnswer({ whole: '', numerator: '', denominator: '' });
          };

          const checkAnswer = () => {
            // For hard level, allow whole numbers, mixed numbers, or improper fractions
            if (level === 'hard') {
              // Check if they entered just a whole number (no fraction part)
              if (userAnswer.whole && !userAnswer.numerator && !userAnswer.denominator) {
                const userWholeOnly = parseInt(userAnswer.whole);
                const wholeAsImproper = simplifyFraction(userWholeOnly, 1);
                
                if (wholeAsImproper.numerator === currentProblem.answer.numerator && 
                    wholeAsImproper.denominator === currentProblem.answer.denominator) {
                  setFeedback('ðŸŽ‰ Correct! Making your move...');
                  setTimeout(() => {
                    const newBoard = [...board];
                    newBoard[selectedCell] = currentPlayer;
                    setBoard(newBoard);
                    setCurrentPlayer(currentPlayer === 'X' ? 'O' : 'X');
                    setSelectedCell(null);
                    setCurrentProblem(null);
                    setUserAnswer({ whole: '', numerator: '', denominator: '' });
                    setFeedback('');
                    setShowAnswer(false);
                  }, 1500);
                  return;
                }
              }
              
              // Check if they entered a fraction (with or without whole number)
              if (userAnswer.numerator && userAnswer.denominator) {
                const userNum = parseInt(userAnswer.numerator);
                const userDen = parseInt(userAnswer.denominator);
                const userWhole = userAnswer.whole ? parseInt(userAnswer.whole) : 0;
                
                // Convert user's answer to improper fraction
                const userImproperNum = userWhole * userDen + userNum;
                const userSimplified = simplifyFraction(userImproperNum, userDen);

                if (userSimplified.numerator === currentProblem.answer.numerator && 
                    userSimplified.denominator === currentProblem.answer.denominator) {
                  setFeedback('ðŸŽ‰ Correct! Making your move...');
                  
                  setTimeout(() => {
                    const newBoard = [...board];
                    newBoard[selectedCell] = currentPlayer;
                    setBoard(newBoard);
                    setCurrentPlayer(currentPlayer === 'X' ? 'O' : 'X');
                    setSelectedCell(null);
                    setCurrentProblem(null);
                    setUserAnswer({ whole: '', numerator: '', denominator: '' });
                    setFeedback('');
                    setShowAnswer(false);
                  }, 1500);
                  return;
                }
              }
              
              setFeedback('âŒ Not quite. Try again or click "Show Answer" to skip your turn.');
            } else {
              // Easy and medium levels - just check fraction
              if (!userAnswer.numerator || !userAnswer.denominator) {
                setFeedback('Please enter both numerator and denominator!');
                return;
              }

              const userNum = parseInt(userAnswer.numerator);
              const userDen = parseInt(userAnswer.denominator);
              const simplified = simplifyFraction(userNum, userDen);

              if (simplified.numerator === currentProblem.answer.numerator && 
                  simplified.denominator === currentProblem.answer.denominator) {
                setFeedback('ðŸŽ‰ Correct! Making your move...');
                
                setTimeout(() => {
                  const newBoard = [...board];
                  newBoard[selectedCell] = currentPlayer;
                  setBoard(newBoard);
                  setCurrentPlayer(currentPlayer === 'X' ? 'O' : 'X');
                  setSelectedCell(null);
                  setCurrentProblem(null);
                  setUserAnswer({ whole: '', numerator: '', denominator: '' });
                  setFeedback('');
                  setShowAnswer(false);
                }, 1500);
              } else {
                setFeedback('âŒ Not quite. Try again or click "Show Answer" to skip your turn.');
              }
            }
          };

          const showCorrectAnswer = () => {
            setShowAnswer(true);
            setFeedback(`The answer is ${currentProblem.answer.numerator}/${currentProblem.answer.denominator}. Your turn is skipped.`);
            setTimeout(() => {
              setCurrentPlayer(currentPlayer === 'X' ? 'O' : 'X');
              setSelectedCell(null);
              setCurrentProblem(null);
              setUserAnswer({ whole: '', numerator: '', denominator: '' });
              setFeedback('');
              setShowAnswer(false);
            }, 3000);
          };

          const resetGame = () => {
            setBoard(Array(9).fill(null));
            setCurrentPlayer('X');
            setSelectedCell(null);
            setCurrentProblem(null);
            setFeedback('');
            setUserAnswer({ whole: '', numerator: '', denominator: '' });
            setWinner(null);
            setRound(round + 1);
          };

          const XIcon = () => (
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="4" strokeLinecap="round" strokeLinejoin="round" className="w-10 h-10 sm:w-12 sm:h-12 md:w-16 md:h-16">
              <line x1="18" y1="6" x2="6" y2="18"></line>
              <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
          );

          const CircleIcon = () => (
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="4" strokeLinecap="round" strokeLinejoin="round" className="w-10 h-10 sm:w-12 sm:h-12 md:w-16 md:h-16">
              <circle cx="12" cy="12" r="10"></circle>
            </svg>
          );

          const TrophyIcon = () => (
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="w-24 h-24 mx-auto">
              <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"></path>
              <path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"></path>
              <path d="M4 22h16"></path>
              <path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"></path>
              <path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"></path>
              <path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"></path>
            </svg>
          );

          const SparklesIcon = () => (
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="w-16 h-16">
              <path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"></path>
              <path d="M5 3v4"></path>
              <path d="M19 17v4"></path>
              <path d="M3 5h4"></path>
              <path d="M17 19h4"></path>
            </svg>
          );

          if (!gameStarted) {
            return (
              <div className="min-h-screen bg-gradient flex items-center justify-center p-8">
                <div className="bg-white rounded-3xl shadow-2xl p-12 max-w-2xl text-center">
                  <div className="flex justify-center mb-6 text-yellow-500">
                    <SparklesIcon />
                  </div>
                  <h1 className="text-5xl font-bold text-purple-600 mb-4">Fraction Tic-Tac-Toe!</h1>
                  <p className="text-xl text-gray-700 mb-4">Solve fractions to make your moves!</p>
                  <p className="text-lg text-gray-600 mb-8">Choose your difficulty level:</p>
                  
                  <div className="space-y-4">
                    <button
                      onClick={() => { setLevel('easy'); setGameStarted(true); }}
                      className="w-full bg-green-500 hover:bg-green-600 text-white font-bold py-6 px-8 rounded-2xl text-2xl transform transition hover:scale-105 shadow-lg"
                    >
                      ðŸŸ¢ Easy - Same Denominators
                    </button>
                    <button
                      onClick={() => { setLevel('medium'); setGameStarted(true); }}
                      className="w-full bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-6 px-8 rounded-2xl text-2xl transform transition hover:scale-105 shadow-lg"
                    >
                      ðŸŸ¡ Medium - Different Denominators
                    </button>
                    <button
                      onClick={() => { setLevel('hard'); setGameStarted(true); }}
                      className="w-full bg-red-500 hover:bg-red-600 text-white font-bold py-6 px-8 rounded-2xl text-2xl transform transition hover:scale-105 shadow-lg"
                    >
                      ðŸ”´ Hard - Mixed Number with Fraction
                    </button>
                  </div>
                </div>
              </div>
            );
          }

          if (winner) {
            return (
              <div className="min-h-screen bg-gradient flex items-center justify-center p-8">
                <div className="bg-white rounded-3xl shadow-2xl p-12 max-w-2xl text-center">
                  <div className="text-yellow-500">
                    <TrophyIcon />
                  </div>
                  {winner === 'tie' ? (
                    <h2 className="text-4xl font-bold text-purple-600 mb-4">It's a Tie!</h2>
                  ) : (
                    <>
                      <h2 className="text-4xl font-bold text-purple-600 mb-4">Player {winner} Wins!</h2>
                      <div className="text-6xl mb-6">
                        {winner === 'X' ? <div className="text-blue-500"><XIcon /></div> : <div className="text-red-500"><CircleIcon /></div>}
                      </div>
                    </>
                  )}
                  <div className="text-2xl font-bold text-gray-700 mb-8">
                    <div>Round {round}</div>
                    <div className="flex justify-center gap-8 mt-4">
                      <div className="text-blue-500">Player X: {playerXScore}</div>
                      <div className="text-red-500">Player O: {playerOScore}</div>
                    </div>
                  </div>
                  <div className="flex gap-4 justify-center">
                    <button
                      onClick={resetGame}
                      className="bg-green-600 hover:bg-green-700 text-white font-bold py-4 px-8 rounded-xl text-xl"
                    >
                      Play Again
                    </button>
                    <button
                      onClick={() => { 
                        setGameStarted(false); 
                        setPlayerXScore(0);
                        setPlayerOScore(0);
                        setRound(1);
                        resetGame();
                      }}
                      className="bg-purple-600 hover:bg-purple-700 text-white font-bold py-4 px-8 rounded-xl text-xl"
                    >
                      Change Level
                    </button>
                  </div>
                </div>
              </div>
            );
          }

          return (
            <div className="min-h-screen bg-gradient p-8">
              <div className="max-w-6xl mx-auto">
                <div className="bg-white rounded-3xl shadow-2xl p-8 mb-6">
                  <div className="flex flex-col sm:flex-row justify-between items-center mb-6 gap-4">
                    <div className="text-center">
                      <div className="text-sm text-gray-600 mb-1">Round {round}</div>
                      <span className="inline-block bg-purple-100 text-purple-800 px-4 sm:px-6 py-2 rounded-full font-bold text-base sm:text-lg">
                        {level === 'easy' ? 'ðŸŸ¢ Easy' : level === 'medium' ? 'ðŸŸ¡ Medium' : 'ðŸ”´ Hard'}
                      </span>
                    </div>
                    <div className="text-xl sm:text-2xl md:text-3xl font-bold">
                      <span className="text-blue-500">Player X: {playerXScore}</span>
                      <span className="mx-2 sm:mx-4">-</span>
                      <span className="text-red-500">Player O: {playerOScore}</span>
                    </div>
                  </div>

                  <div className="text-center mb-6">
                    <div className="text-xl sm:text-2xl font-bold text-gray-700 mb-2">
                      Current Turn: <span className={currentPlayer === 'X' ? 'text-blue-500' : 'text-red-500'}>Player {currentPlayer}</span>
                    </div>
                    {!currentProblem && <div className="text-base sm:text-lg text-gray-600">Click a square to make your move!</div>}
                  </div>

                  <div className="grid grid-cols-1 lg:grid-cols-2 gap-6 lg:gap-8 mb-6">
                    {/* Tic-Tac-Toe Board */}
                    <div className="flex items-center justify-center order-2 lg:order-1">
                      <div className="grid grid-cols-3 gap-2 sm:gap-3 bg-gray-800 p-2 sm:p-3 rounded-2xl">
                        {board.map((cell, index) => (
                          <button
                            key={index}
                            onClick={() => handleCellClick(index)}
                            disabled={cell !== null || currentProblem !== null || winner !== null}
                            className={`w-16 h-16 sm:w-20 sm:h-20 md:w-24 md:h-24 bg-white rounded-xl flex items-center justify-center text-6xl font-bold transition-all transform hover:scale-105 ${
                              selectedCell === index ? 'ring-4 ring-yellow-400' : ''
                            } ${cell === null && !currentProblem && !winner ? 'hover:bg-gray-100 cursor-pointer' : 'cursor-not-allowed'}`}
                          >
                            {cell === 'X' && <div className="text-blue-500"><XIcon /></div>}
                            {cell === 'O' && <div className="text-red-500"><CircleIcon /></div>}
                          </button>
                        ))}
                      </div>
                    </div>

                    {/* Problem Solving Area */}
                    <div className="flex items-center justify-center order-1 lg:order-2">
                      {currentProblem ? (
                        <div className="bg-gradient-problem rounded-2xl p-4 sm:p-6 md:p-8 w-full">
                          <div className="text-center mb-6">
                            <div className="text-xl font-bold text-gray-700 mb-4">Solve to make your move!</div>
                            {level === 'hard' && (
                              <div className="text-sm text-gray-600 mb-2">
                                You can answer as a whole number, mixed number, or improper fraction
                              </div>
                            )}
                          </div>
                          
                          <div className="font-bold text-center text-gray-800 mb-6 flex items-center justify-center flex-wrap gap-2 sm:gap-3 md:gap-4 text-3xl sm:text-4xl md:text-5xl">
                            <div className="flex items-center gap-1 sm:gap-2">
                              {currentProblem.fraction1.whole && (
                                <span>{currentProblem.fraction1.whole}</span>
                              )}
                              <div className="flex flex-col items-center text-2xl sm:text-3xl md:text-4xl">
                                <span>{currentProblem.fraction1.numerator}</span>
                                <div className="border-t-2 sm:border-t-3 md:border-t-4 border-gray-800 w-8 sm:w-10 md:w-12"></div>
                                <span>{currentProblem.fraction1.denominator}</span>
                              </div>
                            </div>
                            
                            <span className="text-4xl sm:text-5xl md:text-6xl">{currentProblem.operation}</span>
                            
                            <div className="flex items-center gap-1 sm:gap-2">
                              {currentProblem.fraction2.whole && (
                                <span>{currentProblem.fraction2.whole}</span>
                              )}
                              <div className="flex flex-col items-center text-2xl sm:text-3xl md:text-4xl">
                                <span>{currentProblem.fraction2.numerator}</span>
                                <div className="border-t-2 sm:border-t-3 md:border-t-4 border-gray-800 w-8 sm:w-10 md:w-12"></div>
                                <span>{currentProblem.fraction2.denominator}</span>
                              </div>
                            </div>
                            
                            <span className="text-4xl sm:text-5xl md:text-6xl">=</span>
                            
                            <div className="flex items-center gap-1 sm:gap-2">
                              {level === 'hard' && (
                                <>
                                  <input
                                    type="number"
                                    value={userAnswer.whole}
                                    onChange={(e) => setUserAnswer({ ...userAnswer, whole: e.target.value })}
                                    className="w-12 sm:w-14 md:w-16 text-center border-4 border-purple-400 rounded-lg p-1 sm:p-2 text-2xl sm:text-3xl md:text-4xl"
                                    placeholder="0"
                                    disabled={showAnswer}
                                    min="0"
                                  />
                                </>
                              )}
                              <div className="flex flex-col items-center">
                                <input
                                  type="number"
                                  value={userAnswer.numerator}
                                  onChange={(e) => setUserAnswer({ ...userAnswer, numerator: e.target.value })}
                                  className="w-14 sm:w-16 md:w-20 text-center border-4 border-purple-400 rounded-lg p-1 sm:p-2 mb-1 text-2xl sm:text-3xl md:text-4xl"
                                  placeholder="?"
                                  disabled={showAnswer}
                                />
                                <div className="border-t-2 sm:border-t-3 md:border-t-4 border-gray-800 w-14 sm:w-16 md:w-20"></div>
                                <input
                                  type="number"
                                  value={userAnswer.denominator}
                                  onChange={(e) => setUserAnswer({ ...userAnswer, denominator: e.target.value })}
                                  className="w-14 sm:w-16 md:w-20 text-center border-4 border-purple-400 rounded-lg p-1 sm:p-2 mt-1 text-2xl sm:text-3xl md:text-4xl"
                                  placeholder="?"
                                  disabled={showAnswer}
                                />
                              </div>
                            </div>
                          </div>

                          <div className="flex flex-col gap-3">
                            <button
                              onClick={checkAnswer}
                              disabled={showAnswer}
                              className="bg-green-500 hover:bg-green-600 disabled:bg-gray-400 text-white font-bold py-2 sm:py-3 px-4 sm:px-6 rounded-xl text-base sm:text-lg transform transition hover:scale-105"
                            >
                              Submit Answer
                            </button>
                            <button
                              onClick={showCorrectAnswer}
                              disabled={showAnswer}
                              className="bg-orange-500 hover:bg-orange-600 disabled:bg-gray-400 text-white font-bold py-2 sm:py-3 px-4 sm:px-6 rounded-xl text-base sm:text-lg transform transition hover:scale-105"
                            >
                              Skip Turn (Show Answer)
                            </button>
                          </div>

                          {feedback && (
                            <div className={`mt-4 text-lg sm:text-xl font-bold text-center p-3 rounded-xl ${
                              feedback.includes('Correct') ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'
                            }`}>
                              {feedback}
                            </div>
                          )}
                        </div>
                      ) : (
                        <div className="text-center text-gray-500 text-xl">
                          <div className="mb-4 text-6xl">ðŸŽ¯</div>
                          <div>Select a square on the board to get a problem!</div>
                        </div>
                      )}
                    </div>
                  </div>

                  <div className="text-center">
                    <button
                      onClick={() => { 
                        setGameStarted(false);
                        setPlayerXScore(0);
                        setPlayerOScore(0);
                        setRound(1);
                        resetGame();
                      }}
                      className="bg-purple-600 hover:bg-purple-700 text-white font-bold py-3 px-6 rounded-xl"
                    >
                      Change Level
                    </button>
                  </div>
                </div>
              </div>
            </div>
          );
        }

        ReactDOM.render(<FractionTicTacToe />, document.getElementById('root'));
    </script>
</body>
</html>